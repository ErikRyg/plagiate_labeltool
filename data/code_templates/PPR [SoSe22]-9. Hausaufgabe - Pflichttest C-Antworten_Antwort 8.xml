<?xml version="1.0" encoding="UTF-8"?>
<quiz>
<!-- question: 3420489  -->
  <question type="coderunner">
    <name>
      <text>Faktorisierung (Neu; FERTIG)</text>
    </name>
    <questiontext format="html">
      <text><![CDATA[<p>Schreiben Sie eine Funktion, die zu einer ganzen Zahl zwei mögliche Faktoren, die zusammen die übergebene Zahl ergeben, zurückgibt.<br>Verwenden Sie für die Funktion den folgenden <strong>Funktionskopf</strong>:<br></p><ul><li>void factorize(long {{ cr_random.product }}, long *{{ cr_random.f1 }}, long *{{ cr_random.f2 }})<br></li></ul><p></p>Dabei soll folgender <strong>Algorithmus </strong><strong>implementiert </strong>werden:<br><p></p><ul><li><strong>{{ cr_random.product }}</strong><strong></strong> = 0 ---&gt; <strong>{{ cr_random.f1 }}</strong><strong></strong> = 1;&nbsp;&nbsp; <strong>{{ cr_random.f2 }}</strong><strong></strong> = <strong>{{ cr_random.product }}</strong><strong></strong></li><li><strong>{{ cr_random.product }}</strong><strong></strong> = 1 ---&gt; <strong>{{ cr_random.f1 }}</strong><strong></strong> = 1;&nbsp;&nbsp; <strong>{{ cr_random.f2 }}</strong><strong></strong> = <strong>{{ cr_random.product }}</strong><strong></strong></li><li><strong>ansonsten</strong>: Wenn die Hälfte des Produktes keine ganzzahlige Vielfache vom Produkt selbst ist, verringere die Hälfte um 1 und <strong>prüfe mit der neuen Zahl erneut</strong><br>&nbsp;&nbsp;&nbsp;&nbsp; <strong>sobald </strong>es eine Vielfache des Produktes ist ---&gt; {{ cr_random.f1 }} = <em>die ganzzahlige Vielfache vom Produkt</em>;&nbsp;&nbsp; {{ cr_random.f2 }} = <em>das Produkt</em> / <em>die ganzzahlige Vielfache vom Produkt</em></li></ul><p><em><br></em></p><p>Da C-Funktionen immer nur <u>einen</u> Rückgabewert haben können (und wir 2 Werte zurückgeben wollen), soll die Wertrückgabe über <strong>Zeiger </strong>erfolgen.<br>Schreiben Sie <strong>außerdem </strong>eine <em>main</em>-Funktion, die eine ganze Zahl vom Benutzer <strong>einliest</strong>, diese mit Hilfe der Funktion in Faktoren zerlegt und anschließend die eingegebene Zahl und die Faktoren auf der Konsole <strong>ausgibt</strong>.</p><p>Verwendet die <span class="" style="color: rgb(197, 14, 31);">vorgegebenen Variablennamen</span>.<br><br></p>]]></text>
    </questiontext>
    <generalfeedback format="html">
      <text></text>
    </generalfeedback>
    <defaultgrade>1</defaultgrade>
    <penalty>0</penalty>
    <hidden>0</hidden>
    <idnumber></idnumber>
    <coderunnertype>c_advanced</coderunnertype>
    <prototypetype>0</prototypetype>
    <allornothing>0</allornothing>
    <penaltyregime>0, 0, 5, 10, 20, ...</penaltyregime>
    <precheck>0</precheck>
    <hidecheck>0</hidecheck>
    <showsource>0</showsource>
    <answerboxlines>32</answerboxlines>
    <answerboxcolumns>100</answerboxcolumns>
    <answerpreload><![CDATA[#include <stdio.h>

void factorize(long {{ cr_random.product }}, long *{{ cr_random.f1 }}, long *{{ cr_random.f2 }})
{
	// Your factorization
}

int main(){
	printf("Please enter an Integer: ");
	printf("Possible Factors of %ld are %ld and %ld.\n");
	return 0;
}
]]></answerpreload>
    <globalextra></globalextra>
    <useace></useace>
    <resultcolumns></resultcolumns>
    <template></template>
    <iscombinatortemplate></iscombinatortemplate>
    <allowmultiplestdins></allowmultiplestdins>
    <answer><![CDATA[#include <stdio.h>

void factorize(long {{ cr_random.product }}, long *{{ cr_random.f1 }}, long *{{ cr_random.f2 }})
{
	unsigned long div = {{ cr_random.product }}/2;

	if({{ cr_random.product }} == 0 || {{ cr_random.product }} == 1){
		*{{ cr_random.f1 }} = 1;
		*{{ cr_random.f2 }} = {{ cr_random.product }};
		return;
	}
	while(({{ cr_random.product }}%div)!=0)
		div--;
	*{{ cr_random.f1 }} = div;
	*{{ cr_random.f2 }} = {{ cr_random.product }}/div;
	return;
}



int main(){
	long {{ cr_random.product }} = 0, {{ cr_random.f1 }} = 0, {{ cr_random.f2 }} = 0;
	printf("Please enter an Integer: ");
	scanf("%ld", &{{ cr_random.product }});
	getchar();
	factorize({{ cr_random.product }}, &{{ cr_random.f1 }}, &{{ cr_random.f2 }});
	printf("Possible Factors of %ld are %ld and %ld.\n",
			{{ cr_random.product }}, {{ cr_random.f1 }}, {{ cr_random.f2 }});
	return 0;
}
]]></answer>
    <validateonsave>1</validateonsave>
    <testsplitterre></testsplitterre>
    <language></language>
    <acelang></acelang>
    <sandbox></sandbox>
    <grader></grader>
    <cputimelimitsecs></cputimelimitsecs>
    <memlimitmb></memlimitmb>
    <sandboxparams></sandboxparams>
    <templateparams><![CDATA[{
    "cr_studentFileName": "StudentAnswer",
    {% set pool = [["faktor1", "factor1", "zahl1", "nummer1"],
    ["faktor2", "factor2", "zahl2", "nummer2"],
    ["produkt", "product", "ergebnis", "resultat"]] %}
    "cr_random_pool": {{ pool|json_encode(constant("JSON_PRETTY_PRINT")) }},
    {% set random_number = random((pool[0]|length)-1) %}
    "cr_random": {
        "f1": "{{ pool[0][random_number] }}",
        "f2": "{{ pool[1][random_number] }}",
        "product": "{{ pool[2][random_number] }}"
    }
}]]></templateparams>
    <hoisttemplateparams>1</hoisttemplateparams>
    <templateparamslang>twig</templateparamslang>
    <templateparamsevalpertry>0</templateparamsevalpertry>
    <templateparamsevald><![CDATA[{"cr_studentFileName":"StudentAnswer","cr_random_pool":[["faktor1","factor1","zahl1","nummer1"],["faktor2","factor2","zahl2","nummer2"],["produkt","product","ergebnis","resultat"]],"cr_random":{"f1":"faktor1","f2":"faktor2","product":"produkt"}}]]></templateparamsevald>
    <twigall>1</twigall>
    <uiplugin></uiplugin>
    <uiparameters></uiparameters>
    <attachments>0</attachments>
    <attachmentsrequired>0</attachmentsrequired>
    <maxfilesize>10240</maxfilesize>
    <filenamesregex></filenamesregex>
    <filenamesexplain></filenamesexplain>
    <displayfeedback>1</displayfeedback>
    <giveupallowed>0</giveupallowed>
    <prototypeextra></prototypeextra>
    <testcases>
      <testcase testtype="0" useasexample="1" hiderestiffail="0" mark="1.0000000" >
      <testcode>
                <text>// 1. Test
main();</text>
      </testcode>
      <stdin>
                <text>50</text>
      </stdin>
      <expected>
                <text>Please enter an Integer: Possible Factors of 50 are 25 and 2.
</text>
      </expected>
      <extra>
                <text><![CDATA[S_A = remove_comments(S_A)
print_if(list_of_globals(S_A) == [], "", "Nicht erlaubt: Folgende globale Variablen wurden definiert:\n" + "\n".join(list_of_globals(S_A)) + "\n\n")
test_if_suspicious()]]></text>
      </extra>
      <display>
                <text>SHOW</text>
      </display>
    </testcase>
      <testcase testtype="0" useasexample="1" hiderestiffail="0" mark="1.0000000" >
      <testcode>
                <text>// 2. Test
main();</text>
      </testcode>
      <stdin>
                <text>1</text>
      </stdin>
      <expected>
                <text>Please enter an Integer: Possible Factors of 1 are 1 and 1.
</text>
      </expected>
      <extra>
                <text><![CDATA[S_A = remove_comments(S_A)
print_if(list_of_globals(S_A) == [], "", "Nicht erlaubt: Folgende globale Variablen wurden definiert:\n" + "\n".join(list_of_globals(S_A)) + "\n\n")
test_if_suspicious()]]></text>
      </extra>
      <display>
                <text>SHOW</text>
      </display>
    </testcase>
      <testcase testtype="0" useasexample="1" hiderestiffail="0" mark="1.0000000" >
      <testcode>
                <text>// 3. Test
main();</text>
      </testcode>
      <stdin>
                <text>27</text>
      </stdin>
      <expected>
                <text>Please enter an Integer: Possible Factors of 27 are 9 and 3.
</text>
      </expected>
      <extra>
                <text><![CDATA[S_A = remove_comments(S_A)
print_if(list_of_globals(S_A) == [], "", "Nicht erlaubt: Folgende globale Variablen wurden definiert:\n" + "\n".join(list_of_globals(S_A)) + "\n\n")
test_if_suspicious()]]></text>
      </extra>
      <display>
                <text>SHOW</text>
      </display>
    </testcase>
      <testcase testtype="0" useasexample="0" hiderestiffail="0" mark="1.0000000" >
      <testcode>
                <text>// 4. Test
main();</text>
      </testcode>
      <stdin>
                <text>100</text>
      </stdin>
      <expected>
                <text>Please enter an Integer: Possible Factors of 100 are 50 and 2.
</text>
      </expected>
      <extra>
                <text><![CDATA[S_A = remove_comments(S_A)
print_if(list_of_globals(S_A) == [], "", "Nicht erlaubt: Folgende globale Variablen wurden definiert:\n" + "\n".join(list_of_globals(S_A)) + "\n\n")
test_if_suspicious()]]></text>
      </extra>
      <display>
                <text>HIDE_IF_SUCCEED</text>
      </display>
    </testcase>
      <testcase testtype="0" useasexample="0" hiderestiffail="0" mark="1.0000000" >
      <testcode>
                <text>// 5. Test (Primzahl)
main();</text>
      </testcode>
      <stdin>
                <text>19</text>
      </stdin>
      <expected>
                <text>Please enter an Integer: Possible Factors of 19 are 1 and 19.
</text>
      </expected>
      <extra>
                <text><![CDATA[S_A = remove_comments(S_A)
print_if(list_of_globals(S_A) == [], "", "Nicht erlaubt: Folgende globale Variablen wurden definiert:\n" + "\n".join(list_of_globals(S_A)) + "\n\n")
test_if_suspicious()]]></text>
      </extra>
      <display>
                <text>HIDE_IF_SUCCEED</text>
      </display>
    </testcase>
      <testcase testtype="0" useasexample="1" hiderestiffail="0" mark="1.0000000" >
      <testcode>
                <text><![CDATA[long {{ cr_random.product }} = 1, {{ cr_random.f1 }}, {{ cr_random.f2 }};
factorize({{ cr_random.product }}, &{{ cr_random.f1 }}, &{{ cr_random.f2 }});
printf("{{ cr_random.product }} = %li; {{ cr_random.f1 }} = %li; {{ cr_random.f2 }} = %li\n", {{ cr_random.product }}, {{ cr_random.f1 }}, {{ cr_random.f2 }});]]></text>
      </testcode>
      <stdin>
                <text></text>
      </stdin>
      <expected>
                <text>{{ cr_random.product }} = 1; {{ cr_random.f1 }} = 1; {{ cr_random.f2 }} = 1
</text>
      </expected>
      <extra>
                <text>test_if_suspicious()</text>
      </extra>
      <display>
                <text>SHOW</text>
      </display>
    </testcase>
      <testcase testtype="0" useasexample="0" hiderestiffail="0" mark="1.0000000" >
      <testcode>
                <text><![CDATA[long {{ cr_random.product }} = 0, {{ cr_random.f1 }}, {{ cr_random.f2 }};
factorize({{ cr_random.product }}, &{{ cr_random.f1 }}, &{{ cr_random.f2 }});
printf("{{ cr_random.product }} = %li; {{ cr_random.f1 }} = %li; {{ cr_random.f2 }} = %li\n", {{ cr_random.product }}, {{ cr_random.f1 }}, {{ cr_random.f2 }});]]></text>
      </testcode>
      <stdin>
                <text></text>
      </stdin>
      <expected>
                <text>{{ cr_random.product }} = 0; {{ cr_random.f1 }} = 1; {{ cr_random.f2 }} = 0
</text>
      </expected>
      <extra>
                <text>test_if_suspicious()</text>
      </extra>
      <display>
                <text>HIDE_IF_SUCCEED</text>
      </display>
    </testcase>
      <testcase testtype="0" useasexample="0" hiderestiffail="0" mark="1.0000000" >
      <testcode>
                <text><![CDATA[long {{ cr_random.product }} = 66, {{ cr_random.f1 }}, {{ cr_random.f2 }};
factorize({{ cr_random.product }}, &{{ cr_random.f1 }}, &{{ cr_random.f2 }});
printf("{{ cr_random.product }} = %li; {{ cr_random.f1 }} = %li; {{ cr_random.f2 }} = %li\n", {{ cr_random.product }}, {{ cr_random.f1 }}, {{ cr_random.f2 }});]]></text>
      </testcode>
      <stdin>
                <text></text>
      </stdin>
      <expected>
                <text>{{ cr_random.product }} = 66; {{ cr_random.f1 }} = 33; {{ cr_random.f2 }} = 2
</text>
      </expected>
      <extra>
                <text>test_if_suspicious()</text>
      </extra>
      <display>
                <text>HIDE_IF_SUCCEED</text>
      </display>
    </testcase>
      <testcase testtype="0" useasexample="0" hiderestiffail="0" mark="1.0000000" >
      <testcode>
                <text>// Testet ob ein for- oder while-Konstrukt verwendet wurde</text>
      </testcode>
      <stdin>
                <text></text>
      </stdin>
      <expected>
                <text>Passt!
</text>
      </expected>
      <extra>
                <text><![CDATA[S_A = remove_comments(S_A)
print_if(re.search("while", S_A) or re.search("for", S_A))
test_if_suspicious()]]></text>
      </extra>
      <display>
                <text>HIDE_IF_SUCCEED</text>
      </display>
    </testcase>
      <testcase testtype="0" useasexample="0" hiderestiffail="0" mark="1.0000000" >
      <testcode>
                <text>// Testet ob der Nutzer nach einer Zahl gefragt wird</text>
      </testcode>
      <stdin>
                <text></text>
      </stdin>
      <expected>
                <text>Passt!</text>
      </expected>
      <extra>
                <text><![CDATA[S_A = remove_comments(S_A)
print_if(re.search("scanf", S_A))
test_if_suspicious()]]></text>
      </extra>
      <display>
                <text>HIDE_IF_SUCCEED</text>
      </display>
    </testcase>
<file name="Terminal.java" path="/" encoding="base64">DQppbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsNCmltcG9ydCBqYXZhLmlvLlByaW50U3RyZWFtOw0KaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7DQppbXBvcnQgamF2YS51dGlsLkFycmF5czsNCmltcG9ydCBqYXZhLnV0aWwuSW5wdXRNaXNtYXRjaEV4Y2VwdGlvbjsNCmltcG9ydCBqYXZhLnV0aWwuTm9TdWNoRWxlbWVudEV4Y2VwdGlvbjsNCmltcG9ydCBqYXZhLnV0aWwuU2Nhbm5lcjsNCg0KLyoqDQogKiBEaWVzZSBLbGFzc2Ugc3RlbGx0IGVpbmlnZSBlaW5mYWNoZSBNZXRob2RlbiB6dXIgRWluLSB1bmQgQXVzZ2FiZSBhdWYgZWluZW0NCiAqIFRlcm1pbmFsIHp1ciBWZXJmw7xndW5nLg0KICoNCiAqIFdhcnVtIGRpZXNlIEtsYXNzZSBWSUVMIGJlc3NlciBpc3QgYWxzIFRlcm1pbmFsIHYxLnggOiAtIFVubWVuZ2VuIHZvbg0KICogRHVwbGlrYXRpb25lbiB3dXJkZW4gZW50ZmVybnQgLSBTY2FubmVyIGlzdCAiU3RhdGUgb2YgdGhlIEFydCIgKEpESyAxLjUpLA0KICogQnVmZmVyZWRSZWFkZXIgdmVyYWx0ZXQgKEpESyAxLjEpIC0gVmVyd2VuZGV0IGRpZSBKYXZhICJBcnJheXMiIEJpYmxpb3RoZWsgLQ0KICogw5xiZXIgMjAwIFplaWxlbiB3ZW5pZ2VyIGJlaSBzZWxiZW0gRnVua3Rpb25zdW1mYW5nIC0gRnVua3Rpb25pZXJ0IG1pdA0KICogbWVocmVyZW4gSW5wdXRzIGJlaSBNb29kbGUtQ29kZVJ1bm5lci1UZXN0cw0KICoNCiAqIEBhdXRob3IgVG9iaWFzIFdlc3RwaGFsLCBiYXNpZXJlbmQgYXVmIGRlciBBcmJlaXQgdm9uIFAuIFBlcHBlciB1bmQgR3J1cHBlDQogKiBAdmVyc2lvbiAyLjANCiAqLw0KcHVibGljIGNsYXNzIFRlcm1pbmFsIHsNCg0KICAgIHB1YmxpYyBzdGF0aWMgUHJpbnRTdHJlYW0gT1VUID0gU3lzdGVtLm91dDsNCiAgICBwcml2YXRlIHN0YXRpYyBJbnB1dFN0cmVhbSBJTiA9IFN5c3RlbS5pbjsNCiAgICBwcml2YXRlIHN0YXRpYyBTY2FubmVyIFNDQU5ORVIgPSBuZXcgU2Nhbm5lcihJTik7DQogICAgcHJpdmF0ZSBzdGF0aWMgY2hhciBBUlJBWV9PUEVOID0gJ1snLCBBUlJBWV9DTE9TRSA9ICddJywgQVJSQVlfREVMSU1JVEVSID0gJywnOw0KDQogICAgLyoqDQogICAgICogR2lidCBlaW5lIFplaWNoZW5rZXR0ZSBhdXMuDQogICAgICoNCiAgICAgKiBAcGFyYW0gPFQ+IGRlciB2ZXJ3ZW5kZXRlIERhdGVudHlwLjY2Ng0KICAgICAqIEBwYXJhbSB0IGRhcyBhdXN6dWdlYmVuZGUgT2JqZWt0Lg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgPFQ+IHZvaWQgcHJpbnQoVCB0KSB7DQogICAgICAgIGlmICh0LmdldENsYXNzKCkuaXNBcnJheSgpKSB7DQogICAgICAgICAgICBPVVQucHJpbnQoZnJvbUFycmF5KHQpKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIE9VVC5wcmludChub3JtKHQpKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEdpYnQgZWluZSBaZWljaGVua2V0dGUgZ2Vmb2xndCB2b24gZWluZW0gWmVpbGVudW1icnVjaCBhdXMuDQogICAgICoNCiAgICAgKiBAcGFyYW0gPFQ+IGRlciB2ZXJ3ZW5kZXRlIERhdGVudHlwLg0KICAgICAqIEBwYXJhbSB0IGRhcyBhdXN6dWdlYmVuZGUgT2JqZWt0Lg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgPFQ+IHZvaWQgcHJpbnRsbihUIHQpIHsNCiAgICAgICAgaWYgKHQuZ2V0Q2xhc3MoKS5pc0FycmF5KCkpIHsNCiAgICAgICAgICAgIE9VVC5wcmludGxuKGZyb21BcnJheSh0KSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBPVVQucHJpbnRsbihub3JtKHQpKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIExpZXN0IGVpbmUgWmVpY2hlbmtldHRlIHZvbSBUZXJtaW5hbC4NCiAgICAgKg0KICAgICAqIEByZXR1cm4gZGFzIGdlbGVzZW5lIFplaWNoZW4uDQogICAgICovDQogICAgcHVibGljIHN0YXRpYyBTdHJpbmcgcmVhZFN0cmluZygpIHsNCiAgICAgICAgcmV0dXJuIHJlYWQoU3RyaW5nLmNsYXNzKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBHaWJ0IGVpbmUgWmVpY2hlbmtldHRlIGF1cyB1bmQgZXJ3YXJ0ZXQgZGllIEVpbmdhYmUgZWluZXIgWmVpY2hlbmtldHRlLg0KICAgICAqDQogICAgICogQHBhcmFtIHByb21wdCBkaWUgYXVzenVnZWJlbmRlIFplaWNoZW5rZXR0ZS4NCiAgICAgKiBAcmV0dXJuIGRpZSBlaW5nZWdlYmVuZSBaZWljaGVua2V0dGUuDQogICAgICovDQogICAgcHVibGljIHN0YXRpYyBTdHJpbmcgYXNrU3RyaW5nKFN0cmluZyBwcm9tcHQpIHsNCiAgICAgICAgcmV0dXJuIGFzayhTdHJpbmcuY2xhc3MsIHByb21wdCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2lidCBlaW5lIFplaWNoZW5rZXR0ZSBhdXMgdW5kIGVyd2FydGV0IGRpZSBFaW5nYWJlIGVpbmVyIFplaWNoZW5rZXR0ZS4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBwcm9tcHQgZGllIGF1c3p1Z2ViZW5kZSBaZWljaGVua2V0dGUuDQogICAgICogQHJldHVybiBkaWUgZWluZ2VnZWJlbmUgWmVpY2hlbmtldHRlLg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGFzayhTdHJpbmcgcHJvbXB0KSB7DQogICAgICAgIHJldHVybiBhc2tTdHJpbmcocHJvbXB0KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBMaWVzdCBlaW5lbiBXYWhyaGVpdHN3ZXJ0IHZvbSBUZXJtaW5hbC4gRGllIFplaWNoZW5rZXR0ZSAidHJ1ZSINCiAgICAgKiAodW5hYmgmYXVtbDtuZ2lnIHZvbiBHcm8mc3psaWc7LS9LbGVpbnNjaHJlaWJ1bmcpIGxpZWZlcnQgdHJ1ZSwgYWxsZXMNCiAgICAgKiBhbmRlcmUgZmFsc2UuDQogICAgICoNCiAgICAgKiBAcmV0dXJuIGRlciBlaW5nZWdlYmVuZSBXZXJ0Lg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiByZWFkQm9vbGVhbigpIHsNCiAgICAgICAgcmV0dXJuIHJlYWQoQm9vbGVhbi5jbGFzcyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2lidCBlaW5lIFplaWNoZW5rZXR0ZSBhdXMgdW5kIGVyd2FydGV0IGRpZSBFaW5nYWJlIGVpbmVzIFdhaHJoZWl0c3dlcnRzLg0KICAgICAqIERpZSBaZWljaGVua2V0dGUgInRydWUiICh1bmFiaCZhdW1sO25naWcgdm9uIEdybyZzemxpZzstL0tsZWluc2NocmVpYnVuZykNCiAgICAgKiBsaWVmZXJ0IHRydWUsIGFsbGVzIGFuZGVyZSBmYWxzZS4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBwcm9tcHQgZGllIGF1c3p1Z2ViZW5kZSBaZWljaGVua2V0dGUuDQogICAgICogQHJldHVybiBkZXIgZWluZ2VnZWJlbmUgV2VydC4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gYXNrQm9vbGVhbihTdHJpbmcgcHJvbXB0KSB7DQogICAgICAgIHJldHVybiBhc2soQm9vbGVhbi5jbGFzcywgcHJvbXB0KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBMaWVzdCBlaW4gWmVpY2hlbiB2b20gVGVybWluYWwuDQogICAgICoNCiAgICAgKiBAcmV0dXJuIGRhcyBnZWxlc2VuZSBaZWljaGVuLg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgY2hhciByZWFkQ2hhcigpIHsNCiAgICAgICAgcmV0dXJuIHJlYWQoQ2hhcmFjdGVyLmNsYXNzKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBHaWJ0IGVpbmUgWmVpY2hlbmtldHRlIGF1cyB1bmQgZXJ3YXJ0ZXQgZGllIEVpbmdhYmUgZWluZXMgWmVpY2hlbnMuDQogICAgICoNCiAgICAgKiBAcGFyYW0gcHJvbXB0IGRpZSBhdXN6dWdlYmVuZGUgWmVpY2hlbmtldHRlLg0KICAgICAqIEByZXR1cm4gZGFzIGVpbmdlZ2ViZW5lIFplaWNoZW4uDQogICAgICovDQogICAgcHVibGljIHN0YXRpYyBjaGFyIGFza0NoYXIoU3RyaW5nIHByb21wdCkgew0KICAgICAgICByZXR1cm4gYXNrKENoYXJhY3Rlci5jbGFzcywgcHJvbXB0KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBMaWVzdCBlaW5lIGdhbnplIFphaGwgKDggQml0KSB2b20gVGVybWluYWwuDQogICAgICoNCiAgICAgKiBAcmV0dXJuIGRpZSBnZWxlc2VuZSBaYWhsLg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgYnl0ZSByZWFkQnl0ZSgpIHsNCiAgICAgICAgcmV0dXJuIHJlYWQoQnl0ZS5jbGFzcyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2lidCBlaW5lIFplaWNoZW5rZXR0ZSBhdXMgdW5kIGVyd2FydGV0IGRpZSBFaW5nYWJlIGVpbmVyIGdhbnplbiBaYWhsICg4DQogICAgICogQml0KS4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBwcm9tcHQgZGllIGF1c3p1Z2ViZW5kZSBaZWljaGVua2V0dGUuDQogICAgICogQHJldHVybiBkaWUgZWluZ2VnZWJlbmUgWmFobC4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGJ5dGUgYXNrQnl0ZShTdHJpbmcgcHJvbXB0KSB7DQogICAgICAgIHJldHVybiBhc2soQnl0ZS5jbGFzcywgcHJvbXB0KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBMaWVzdCBlaW5lIGdhbnplIFphaGwgKDE2IEJpdCkgdm9tIFRlcm1pbmFsLg0KICAgICAqDQogICAgICogQHJldHVybiBkaWUgZ2VsZXNlbmUgWmFobC4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIHNob3J0IHJlYWRTaG9ydCgpIHsNCiAgICAgICAgcmV0dXJuIHJlYWQoU2hvcnQuY2xhc3MpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEdpYnQgZWluZSBaZWljaGVua2V0dGUgYXVzIHVuZCBlcndhcnRldCBkaWUgRWluZ2FiZSBlaW5lciBnYW56ZW4gWmFobCAoMTYNCiAgICAgKiBCaXQpLg0KICAgICAqDQogICAgICogQHBhcmFtIHByb21wdCBkaWUgYXVzenVnZWJlbmRlIFplaWNoZW5rZXR0ZS4NCiAgICAgKiBAcmV0dXJuIGRpZSBlaW5nZWdlYmVuZSBaYWhsLg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgc2hvcnQgYXNrU2hvcnQoU3RyaW5nIHByb21wdCkgew0KICAgICAgICByZXR1cm4gYXNrKFNob3J0LmNsYXNzLCBwcm9tcHQpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIExpZXN0IGVpbmUgZ2FuemUgWmFobCAoMzIgQml0KSB2b20gVGVybWluYWwuDQogICAgICoNCiAgICAgKiBAcmV0dXJuIGRpZSBnZWxlc2VuZSBaYWhsLg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgaW50IHJlYWRJbnQoKSB7DQogICAgICAgIHJldHVybiByZWFkKEludGVnZXIuY2xhc3MpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEdpYnQgZWluZSBaZWljaGVua2V0dGUgYXVzIHVuZCBlcndhcnRldCBkaWUgRWluZ2FiZSBlaW5lciBnYW56ZW4gWmFobCAoMzINCiAgICAgKiBCaXQpLg0KICAgICAqDQogICAgICogQHBhcmFtIHByb21wdCBkaWUgYXVzenVnZWJlbmRlIFplaWNoZW5rZXR0ZS4NCiAgICAgKiBAcmV0dXJuIGRpZSBlaW5nZWdlYmVuZSBaYWhsLg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgaW50IGFza0ludChTdHJpbmcgcHJvbXB0KSB7DQogICAgICAgIHJldHVybiBhc2soSW50ZWdlci5jbGFzcywgcHJvbXB0KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBMaWVzdCBlaW5lIGdhbnplIFphaGwgKDY0IEJpdCkgdm9tIFRlcm1pbmFsLg0KICAgICAqDQogICAgICogQHJldHVybiBkaWUgZ2VsZXNlbmUgWmFobC4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGxvbmcgcmVhZExvbmcoKSB7DQogICAgICAgIHJldHVybiByZWFkKExvbmcuY2xhc3MpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEdpYnQgZWluZSBaZWljaGVua2V0dGUgYXVzIHVuZCBlcndhcnRldCBkaWUgRWluZ2FiZSBlaW5lciBnYW56ZW4gWmFobCAoNjQNCiAgICAgKiBCaXQpLg0KICAgICAqDQogICAgICogQHBhcmFtIHByb21wdCBkaWUgYXVzenVnZWJlbmRlIFplaWNoZW5rZXR0ZS4NCiAgICAgKiBAcmV0dXJuIGRpZSBlaW5nZWdlYmVuZSBaYWhsLg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBhc2tMb25nKFN0cmluZyBwcm9tcHQpIHsNCiAgICAgICAgcmV0dXJuIGFzayhMb25nLmNsYXNzLCBwcm9tcHQpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIExpZXN0IGVpbmUgR2xlaXRwdW5rdHphaGwoMzIgQml0KSB2b20gVGVybWluYWwuDQogICAgICoNCiAgICAgKiBAcmV0dXJuIGRpZSBnZWxlc2VuZSBaYWhsLg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZmxvYXQgcmVhZEZsb2F0KCkgew0KICAgICAgICByZXR1cm4gcmVhZChGbG9hdC5jbGFzcyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2lidCBlaW5lIFplaWNoZW5rZXR0ZSBhdXMgdW5kIGVyd2FydGV0IGRpZSBFaW5nYWJlIGVpbmVyIEdsZWl0cHVua3R6YWhsDQogICAgICogZWluZmFjaGVyIEdlbmF1aWdrZWl0ICgzMiBCaXQpLg0KICAgICAqDQogICAgICogQHBhcmFtIHByb21wdCBkaWUgYXVzenVnZWJlbmRlIFplaWNoZW5rZXR0ZS4NCiAgICAgKiBAcmV0dXJuIGRpZSBlaW5nZWdlYmVuZSBHbGVpdHB1bmt0emFobC4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZsb2F0IGFza0Zsb2F0KFN0cmluZyBwcm9tcHQpIHsNCiAgICAgICAgcmV0dXJuIGFzayhGbG9hdC5jbGFzcywgcHJvbXB0KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBMaWVzdCBlaW5lIEdsZWl0cHVua3R6YWhsKDY0IEJpdCkgdm9tIFRlcm1pbmFsLg0KICAgICAqDQogICAgICogQHJldHVybiBkaWUgZ2VsZXNlbmUgWmFobC4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGRvdWJsZSByZWFkRG91YmxlKCkgew0KICAgICAgICByZXR1cm4gcmVhZChEb3VibGUuY2xhc3MpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEdpYnQgZWluZSBaZWljaGVua2V0dGUgYXVzIHVuZCBlcndhcnRldCBkaWUgRWluZ2FiZSBlaW5lciBHbGVpdHB1bmt0emFobA0KICAgICAqIGRvcHBlbHRlciBHZW5hdWlna2VpdCAoNjQgQml0KS4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBwcm9tcHQgZGllIGF1c3p1Z2ViZW5kZSBaZWljaGVua2V0dGUuDQogICAgICogQHJldHVybiBkaWUgZWluZ2VnZWJlbmUgR2xlaXRwdW5rdHphaGwuDQogICAgICovDQogICAgcHVibGljIHN0YXRpYyBkb3VibGUgYXNrRG91YmxlKFN0cmluZyBwcm9tcHQpIHsNCiAgICAgICAgcmV0dXJuIGFzayhEb3VibGUuY2xhc3MsIHByb21wdCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2lidCBlaW5lIFplaWNoZW5rZXR0ZSBhdXMgdW5kIGVyd2FydGV0IGRpZSBFaW5nYWJlIGVpbmVzIEludGVnZXIgQXJyYXlzDQogICAgICogaW0gRm9ybWF0OiAiWzEsMiwzLC4uLl0iLg0KICAgICAqDQogICAgICogQHBhcmFtIHByb21wdCBkaWUgYXVzenVnZWJlbmRlIFplaWNoZW5rZXR0ZS4NCiAgICAgKiBAcmV0dXJuIGRhcyBnZWxlc2VuZSBBcnJheS4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGludFtdIGFza0ludEFycmF5KFN0cmluZyBwcm9tcHQpIHsNCiAgICAgICAgd2hpbGUgKHRydWUpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRvSW50QXJyYXkoKFN0cmluZ1tdKSBwYXJzZUFycmF5KGFzayhwcm9tcHQpKSk7DQogICAgICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkgew0KICAgICAgICAgICAgICAgIHByaW50bG4oIlVuZ3VlbHRpZ2UgSW50ZWdlci1aYWhsISAoTm9jaG1hbCBlaW5nZWJlbikiKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKENsYXNzQ2FzdEV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAgICAgICAgaW50W10gZXhhbXBsZSA9IHsxLCAyLCAzLCA0LCA1LCA2fTsNCiAgICAgICAgICAgICAgICBwcmludGxuKCJVbmd1ZWx0aWdlcyBGb3JtYXQhIEJlaXNwaWVsOiBcIiINCiAgICAgICAgICAgICAgICAgICAgICAgICsgQXJyYXlzLnRvU3RyaW5nKGV4YW1wbGUpDQogICAgICAgICAgICAgICAgICAgICAgICArICJcIi4gKE5vY2htYWwgZWluZ2ViZW4pICIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2lidCBlaW5lIFplaWNoZW5rZXR0ZSBhdXMgdW5kIGVyd2FydGV0IGRpZSBFaW5nYWJlIGVpbmVyIEludGVnZXIgTWF0cml4DQogICAgICogaW0gRm9ybWF0OiAiW1sxLDIsM10sWzQsNSw2XSwuLi5dIi4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBwcm9tcHQgZGllIGF1c3p1Z2ViZW5kZSBaZWljaGVua2V0dGUuDQogICAgICogQHJldHVybiBkaWUgZ2VsZXNlbmUgTWF0cml4Lg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgaW50W11bXSBhc2tJbnRNYXRyaXgoU3RyaW5nIHByb21wdCkgew0KICAgICAgICB3aGlsZSAodHJ1ZSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdG9JbnRNYXRyaXgocGFyc2VBcnJheShhc2socHJvbXB0KSkpOw0KICAgICAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgICAgICBwcmludGxuKCJVbmd1ZWx0aWdlIEludGVnZXItWmFobCEgKE5vY2htYWwgZWluZ2ViZW4pIik7DQogICAgICAgICAgICB9IGNhdGNoIChDbGFzc0Nhc3RFeGNlcHRpb24gZSkgew0KICAgICAgICAgICAgICAgIGludFtdW10gZXhhbXBsZSA9IHt7MSwgMiwgM30sIHs0LCA1LCA2fSwgezcsIDgsIDl9fTsNCiAgICAgICAgICAgICAgICBwcmludGxuKCJVbmd1ZWx0aWdlcyBGb3JtYXQhIEJlaXNwaWVsOiBcIiINCiAgICAgICAgICAgICAgICAgICAgICAgICsgQXJyYXlzLmRlZXBUb1N0cmluZyhleGFtcGxlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgKyAiXCIuIChOb2NobWFsIGVpbmdlYmVuKSAiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFNldHMgYW5vdGhlciBpbnB1dCBzdHJlYW0uDQogICAgICoNCiAgICAgKiBAcGFyYW0gaW5wdXQgdGhlIG5ldyBpbnB1dCBzdHJlYW0NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0SW4oSW5wdXRTdHJlYW0gaW5wdXQpIHsNCiAgICAgICAgSU4gPSBpbnB1dDsNCiAgICAgICAgU0NBTk5FUiA9IG5ldyBTY2FubmVyKElOKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBQcmludHMgdGhlIFN0cmluZyBhbmQgY2FsbHMgcmVhZC4NCiAgICAgKg0KICAgICAqIEBwYXJhbSA8VD4gZGF0YXR5cGUgb2YgdGhlIHJldHVybg0KICAgICAqIEBwYXJhbSBjIGNsYXNzIG9mIGRlc2lyZWQgdHlwZSAoZS5nLiBJbnRlZ2VyLmNsYXNzLCBTdHJpbmcuY2xhc3MuLi4pDQogICAgICogQHBhcmFtIHByb21wdCB0aGUgU3RyaW5nIHRvIHByaW50DQogICAgICogQHJldHVybiB1c2VyJ3MgaW5wdXQNCiAgICAgKi8NCiAgICBwcml2YXRlIHN0YXRpYyA8VD4gVCBhc2soQ2xhc3M8VD4gYywgU3RyaW5nIHByb21wdCkgew0KICAgICAgICBwcmludChwcm9tcHQpOw0KICAgICAgICByZXR1cm4gcmVhZChjKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUaGlzIG1ldGhvZCBkZWxpZ2F0ZXMgdG8gdGhlIGNvcnJlY3QgU2Nhbm5lciBtZXRob2RlIHRvIG9idGFpbiBhbiBpbnB1dA0KICAgICAqIG9mIHRoZSBkZXNpcmVkIHR5cGUuIFJlcGVhdGVkIHdoaWxlIGl0IGdldHMgd3JvbmcgaW5wdXRzLiBTdXByZXNzZXMgdGhlDQogICAgICogInVuY2hlY2tlZCIgY29tcGlsZXIgd2FybmluZywgYmVjYXVzZSB0eXBlIHNhZmV0eSBJUyBndWFyYW50ZWVkLiAoT2JqZWN0cw0KICAgICAqIHdpbGwgYmUgYXV0by11bmJveGVkIHRvIHRoZWlyIHByaW1pdGl2ZSBjb3VudGVycGFydHMhKQ0KICAgICAqDQogICAgICogQHBhcmFtIDxUPiBkYXRhdHlwZSBvZiB0aGUgcmV0dXJuDQogICAgICogQHBhcmFtIGMgY2xhc3Mgb2YgZGVzaXJlZCB0eXBlIChlLmcuIEludGVnZXIuY2xhc3MsIFN0cmluZy5jbGFzcy4uLikNCiAgICAgKiBAcmV0dXJuIHVzZXIncyBpbnB1dA0KICAgICAqLw0KICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQ0KICAgIHByaXZhdGUgc3RhdGljIDxUPiBUIHJlYWQoQ2xhc3M8VD4gYykgew0KICAgICAgICB3aGlsZSAodHJ1ZSkgew0KICAgICAgICAgICAgVCB0ID0gbnVsbDsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgaWYgKGMuZXF1YWxzKEJvb2xlYW4uY2xhc3MpKSB7DQogICAgICAgICAgICAgICAgICAgIEJvb2xlYW4gb3V0ID0gU0NBTk5FUi5uZXh0Qm9vbGVhbigpOw0KICAgICAgICAgICAgICAgICAgICB0ID0gKFQpIG91dDsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMuZXF1YWxzKENoYXJhY3Rlci5jbGFzcykpIHsNCiAgICAgICAgICAgICAgICAgICAgQ2hhcmFjdGVyIG91dCA9IFNDQU5ORVIubmV4dCgpLmNoYXJBdCgwKTsNCiAgICAgICAgICAgICAgICAgICAgdCA9IChUKSBvdXQ7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjLmVxdWFscyhCeXRlLmNsYXNzKSkgew0KICAgICAgICAgICAgICAgICAgICBCeXRlIG91dCA9IFNDQU5ORVIubmV4dEJ5dGUoKTsNCiAgICAgICAgICAgICAgICAgICAgdCA9IChUKSBvdXQ7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjLmVxdWFscyhTaG9ydC5jbGFzcykpIHsNCiAgICAgICAgICAgICAgICAgICAgU2hvcnQgb3V0ID0gU0NBTk5FUi5uZXh0U2hvcnQoKTsNCiAgICAgICAgICAgICAgICAgICAgdCA9IChUKSBvdXQ7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjLmVxdWFscyhJbnRlZ2VyLmNsYXNzKSkgew0KICAgICAgICAgICAgICAgICAgICBJbnRlZ2VyIG91dCA9IFNDQU5ORVIubmV4dEludCgpOw0KICAgICAgICAgICAgICAgICAgICB0ID0gKFQpIG91dDsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMuZXF1YWxzKExvbmcuY2xhc3MpKSB7DQogICAgICAgICAgICAgICAgICAgIExvbmcgb3V0ID0gU0NBTk5FUi5uZXh0TG9uZygpOw0KICAgICAgICAgICAgICAgICAgICB0ID0gKFQpIG91dDsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMuZXF1YWxzKEZsb2F0LmNsYXNzKSkgew0KICAgICAgICAgICAgICAgICAgICBGbG9hdCBvdXQgPSBTQ0FOTkVSLm5leHRGbG9hdCgpOw0KICAgICAgICAgICAgICAgICAgICB0ID0gKFQpIG91dDsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMuZXF1YWxzKERvdWJsZS5jbGFzcykpIHsNCiAgICAgICAgICAgICAgICAgICAgRG91YmxlIG91dCA9IFNDQU5ORVIubmV4dERvdWJsZSgpOw0KICAgICAgICAgICAgICAgICAgICB0ID0gKFQpIG91dDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHQgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBTQ0FOTkVSLm5leHRMaW5lKCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoYy5lcXVhbHMoU3RyaW5nLmNsYXNzKSkgew0KICAgICAgICAgICAgICAgICAgICBTdHJpbmcgb3V0ID0gU0NBTk5FUi5uZXh0TGluZSgpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFQpIG91dDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChJbnB1dE1pc21hdGNoRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgICAgICBwcmludCgiVW5ndWVsdGlnZSAiICsgYy5nZXROYW1lKCkgKyAiLVphaGwhIChOb2NobWFsIGVpbmdlYmVuKSAiKTsNCiAgICAgICAgICAgICAgICBTQ0FOTkVSLm5leHRMaW5lKCk7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9IGNhdGNoIChOb1N1Y2hFbGVtZW50RXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgICAgICBwcmludCgiRWluZSBsZWVyZSBaZWlsZSBpc3QgbmljaHQgZXJsYXVidCEgKE5vY2htYWwgZWluZ2ViZW4pICIpOw0KICAgICAgICAgICAgICAgIFNDQU5ORVIubmV4dExpbmUoKTsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAgICAgICAgcHJpbnQoIkZlaGxlciEgRGVyIFNjYW5uZXIgd3VyZGUgYmVyZWl0cyBnZXNjaGxvc3NlbiEiKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oYy5nZXROYW1lKCkgKyAiIGlzIG5vdCBzdXBwb3J0ZWQhIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyA8VD4gU3RyaW5nIGZyb21BcnJheShUIHQpIHsNCiAgICAgICAgcmV0dXJuIEFycmF5cy5kZWVwVG9TdHJpbmcoQXJyYXlzLmFzTGlzdCh0KS50b0FycmF5KCkpLnJlcGxhY2VBbGwoIl4ufC4kIiwgIiIpOw0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIGludFtdIGZyb21TdHJpbmcoU3RyaW5nIHN0ciwgU3RyaW5nIHJlZ2V4KSB7DQogICAgICAgIFN0cmluZ1tdIHNwbGl0ID0gc3RyLnNwbGl0KHJlZ2V4KTsNCiAgICAgICAgaW50W10gYXJyYXkgPSBuZXcgaW50W3NwbGl0Lmxlbmd0aF07DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGFycmF5W2ldID0gSW50ZWdlci5wYXJzZUludChzcGxpdFtpXSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGFycmF5Ow0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIDxUPiBTdHJpbmcgbm9ybShUIHQpIHsNCiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBGbG9hdCkgew0KICAgICAgICAgICAgaWYgKE1hdGguYWJzKChGbG9hdCkgdCkgPCAxZS04Rikgew0KICAgICAgICAgICAgICAgIHJldHVybiBEb3VibGUudG9TdHJpbmcoMC4wKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAodCBpbnN0YW5jZW9mIERvdWJsZSkgew0KICAgICAgICAgICAgaWYgKE1hdGguYWJzKChEb3VibGUpIHQpIDwgMWUtOEYpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gRG91YmxlLnRvU3RyaW5nKDAuMCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHQudG9TdHJpbmcoKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBQYXJzZXMgYSBzdHJpbmctYXJyYXkgdG8gYW4gaW50LWFycmF5Lg0KICAgICAqDQogICAgICogQHBhcmFtIHMgdGhlIHN0cmluZyBhcnJheQ0KICAgICAqIEByZXR1cm4gdGhlIGludCBhcnJheQ0KICAgICAqLw0KICAgIHByaXZhdGUgc3RhdGljIGludFtdIHRvSW50QXJyYXkoU3RyaW5nW10gcykgew0KICAgICAgICBpbnRbXSBhID0gbmV3IGludFtzLmxlbmd0aF07DQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgYVtpXSA9IEludGVnZXIucGFyc2VJbnQoc1tpXS50cmltKCkpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBhOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFBhcnNlcyBhbiBvYmplY3QtYXJyYXkgdGhhdCBjb250YWlucyBzdHJpbmctYXJyYXlzIHRvIGFuIGludC1tYXRyaXguDQogICAgICoNCiAgICAgKiBAcGFyYW0gcyB0aGUgc3RyaW5nIGFycmF5DQogICAgICogQHJldHVybiB0aGUgaW50IGFtYXRyaXgNCiAgICAgKi8NCiAgICBwcml2YXRlIHN0YXRpYyBpbnRbXVtdIHRvSW50TWF0cml4KE9iamVjdFtdIG8pIHsNCiAgICAgICAgaW50W11bXSBhID0gbmV3IGludFtvLmxlbmd0aF1bXTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBvLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBhW2ldID0gdG9JbnRBcnJheSgoU3RyaW5nW10pIG9baV0pOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBhOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFBhcnNlcyBhIHN0cmluZyB0byBhbiBhcnJheS4NCiAgICAgKg0KICAgICAqIEBzZWUgI3BhcnNlQXJyYXlSZWMoU3RyaW5nIHN0cikNCiAgICAgKiBAcGFyYW0gc3RyIHRoZSBzdHJpbmcgdG8gcGFyc2UNCiAgICAgKiBAcmV0dXJuIHRoZSBhcnJheQ0KICAgICAqLw0KICAgIHByaXZhdGUgc3RhdGljIE9iamVjdFtdIHBhcnNlQXJyYXkoU3RyaW5nIHN0cikgew0KICAgICAgICByZXR1cm4gKE9iamVjdFtdKSBwYXJzZUFycmF5UmVjKHN0cik7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmVjdXJzaXZlbHkgcGFyc2VzIGEgc3RyaW5nIHRvIGFuIGFycmF5LiBUaGUgZGltZW5zaW9uIGlzIGFyYml0cmFyeSBhbmQNCiAgICAgKiBkZWZpbmVkIGJ5IHRoZSBnaXZlbiBTdHJpbmcuIEZvciBleGFtcGxlOiAtICJbMSwyLDNdIiByZXN1bHRzIGluIGENCiAgICAgKiBTdHJpbmdbXSAtICJbWzEsMiwzXSxbNCw1LDZdXSIgcmVzdWx0cyBpbiBhbiBPYmplY3RbXVtdIC0NCiAgICAgKiAiW1tbMSwyLDNdLFs0LDUsNl1dLFtbNyw4LDldLFsxMCwxMSwxMl1dXSIgcmVzdWx0cyBpbiBhbiBPYmplY3RbXVtdW10gLQ0KICAgICAqIGFuZCBzbyBvbiBUaGUgaW5uZXIgZGltZW5zaW9uIG9mIHRoZSBhcnJheSBhbHdheXMgaXMgb2YgdHlwZSBTdHJpbmdbXS4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBzdHIgdGhlIHN0cmluZyB0byBwYXJzZQ0KICAgICAqIEByZXR1cm4gdGhlIGFycmF5LW9iamVjdA0KICAgICAqLw0KICAgIHByaXZhdGUgc3RhdGljIE9iamVjdCBwYXJzZUFycmF5UmVjKFN0cmluZyBzdHIpIHsNCiAgICAgICAgc3RyID0gc3RyLnRyaW0oKTsNCiAgICAgICAgaWYgKCFzdHIuY29udGFpbnMoQVJSQVlfT1BFTiArICIiKSkgew0KICAgICAgICAgICAgcmV0dXJuIHN0ci5zcGxpdChBUlJBWV9ERUxJTUlURVIgKyAiIik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpbnQgb3BlbiA9IDA7DQogICAgICAgICAgICBib29sZWFuIG9wZW5lZCA9IGZhbHNlOw0KICAgICAgICAgICAgaW50IG9wZW5JbmRleCA9IDA7DQogICAgICAgICAgICBBcnJheUxpc3Q8T2JqZWN0PiBibG9ja3MgPSBuZXcgQXJyYXlMaXN0PD4oKTsNCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RyLmxlbmd0aCgpOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAoc3RyLmNoYXJBdChpKSA9PSBBUlJBWV9PUEVOKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICghb3BlbmVkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBvcGVuSW5kZXggPSBpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIG9wZW5lZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIG9wZW4rKzsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0ci5jaGFyQXQoaSkgPT0gQVJSQVlfQ0xPU0UpIHsNCiAgICAgICAgICAgICAgICAgICAgb3Blbi0tOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAob3BlbmVkICYmIG9wZW4gPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBibG9ja3MuYWRkKHBhcnNlQXJyYXkoc3RyLnN1YnN0cmluZyhvcGVuSW5kZXggKyAxLCBpKSkpOw0KICAgICAgICAgICAgICAgICAgICBvcGVuZWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBPYmplY3RbXSB0bXAgPSBibG9ja3MudG9BcnJheSgpOw0KICAgICAgICAgICAgaWYgKHRtcC5sZW5ndGggPT0gMSkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0bXBbMF07DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gdG1wOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy9UZXN0aW5nLi4uDQogICAgLypwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7DQogICAgICAgIGNoYXIgYyA9IGFza0NoYXIoImNoYXI6ICIpOw0KICAgICAgICBwcmludGxuKGMpOw0KICAgICAgICBpbnQgaSA9IGFza0ludCgiaW50OiAiKTsNCiAgICAgICAgcHJpbnRsbihpKTsNCiAgICAgICAgZG91YmxlIGQgPSBhc2tEb3VibGUoImRvdWJsZTogIik7DQogICAgICAgIHByaW50bG4oZCk7DQogICAgICAgIFN0cmluZyBzID0gYXNrKCJTdHJpbmc6ICIpOw0KICAgICAgICBwcmludGxuKHMpOw0KICAgICAgICBpbnRbXSBhID0gYXNrSW50QXJyYXkoIkFycmF5OiAiKTsNCiAgICAgICAgcHJpbnRsbihhKTsNCiAgICAgICAgaW50W11bXSBhYSA9IGFza0ludE1hdHJpeCgiTWF0cml4OiAiKTsNCiAgICAgICAgcHJpbnRsbihhYSk7DQogICAgfSovDQp9DQo=</file>
<file name="__Tester__.java" path="/" encoding="base64">cHVibGljIGNsYXNzIF9fVGVzdGVyX18geyANCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7DQoJCcKpIlxcbiIuam9pbihbbGluZSBmb3IgbGluZSBpbiBUX0Muc3BsaXRsaW5lcygpXSnCrg0KICAgIH0gDQp9DQo=</file>
    </testcases>
  </question>

</quiz>